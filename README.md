# FuckBench

## What is it?

FuckBench (*FB*) is a set of Windows batch files and tools to compile from several languages into [BrainFuck](https://en.wikipedia.org/wiki/Brainfuck) (*BF*).

Optionally, in addition to creating BF code, FB compiled generated BF code into 
higly optimized C files using the [Esotope](https://github.com/lifthrasiir/esotope-bfc) BF to C compiler.
If a C compiler is configured, a Windows executable is also created.

Currently, FB supports compiling the following languages to BF:
 * ANSI C (no float support)
 * 6502 Assembler
 * [FuckBrainFuck](http://www.inshame.com/search/label/My%20Progs%3A%20FuckBrainfuck)
 
## How does it work?
 
FB includes a BF emulator for the 6502 CPU (`6502.fbf`); this allows using cross-compilers available for the 6502 CPU to create BF code.
A "linker" is provided (`CodeMerge.jar`) to "link" 6502 executable code to the emulator, creating a single BF file that can then be executed
by using any available BF compiler or interpreter.

Given the generated code is not the fastest, I strongly suggest to configure a C compiler, as explained below, 
such that C code generated by Esotope can be turned into a Windows executable.

## Usage
  
### Configuration

Download latest BF release and unzip it in a folder on your machine. We will refer to this folder as `<root>`.

FB relies on a set of external tools. Some of them need to be installed, as described below.
Others are made available under the `<root>\redistr` folder, for your convenience.
 
  1. I strongly suggest to add `<root>\bin` to your path such that FB tools can be invoked from any location in your machine.
     The below examples assume batch files in the `<root>\bin` folder are accessible from the current colder in the command prompt.
  2. Install [Java](https://www.oracle.com/java/technologies/javase-downloads.html).
     FB needs Java 15 or later.
  
Optional - the below steps are required if you want to compile generated BF code into C.
If you skip the below configuration, BF compilation will stop after genereating BF code.

  3. Install [Python 2](https://www.python.org/downloads/).
  4. Edit `<root>\bin\config.bat` and set FB_PYTHON to the Python interpreter executable. 
  
Optional - the below steps are required if you want to compile C code generated above into a Windows executable.

  5. Edit `<root>\bin\config.bat` and set FB_ESOTOPE to `esotope-bfc` file inside Esotope folder. 

### Specifications for the BrainFuck environment

To successfully run, BF code created by FB the emulator requires:

 * Unsigned wrapping 16 bit cells (0-65565).
	
 * A tape of at least 131193 cells.
   At the beginning of execution the tape head is assumed to be in the leftmost cell
   and will move ony to cells on its right.
	  
* The compiler used for testing on an input ("," comand) will read a string from console until
  user presses enter. The string is returned with a terminating $0D char.

  For example, when the code contains a "," execution stops waiting for user input.
  Users enters "A1!" followed by "enter" key.
  BrainFuck will receive the characters with decimal ASCII code: 65, 49, 33, 10 in this sequence.
	  
  Notice this has implications in using the C libraries. The code in read.s reads input
  until a $00 or $A0 character is returned; if $00 ir read, it is replaced by $A0 before returning
  from C call.
	  
### Compiling BrainFuck code

If you followed the above optional steps, you can invoke:

```
FB_bf f
```

To compile BrainFuck `f.bf` source file into `f.c` C code and corresponding executable Windows file `f.exe`.

Again, if Python or C compilers have not been configured, compilation will stop at some intermediate steps.

### Compiling FuckBrainFuck code

You can invoke:

```
FB_fbf f
```

To compile FuckBrainFuck `f.fbf` source file into `f.bf` BrainFuck code, `f.c` C code and corresponding executable Windows file `f.exe`.

Again, if Python or C compilers have not been configured, compilation will stop at some intermediate steps.

## Compiling 6502 emulator

....